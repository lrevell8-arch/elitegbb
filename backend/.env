# EliteGBB Backend Environment Configuration
# Production Environment - Updated 2026-02-14

# ============================================
# DATABASE CONFIGURATION - CRITICAL FOR CLOUDFLARE
# ============================================
# CLOUDFARE PAGES FUNCTIONS REQUIRE EXTERNAL DATABASE
# Localhost/127.0.0.1 WILL NOT WORK in serverless environment
#
# Option 1: Supabase PostgreSQL (Recommended)
# - Create free project at https://supabase.com
# - Get connection string from Settings > Database
# DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT_ID].supabase.co:5432/postgres

# Option 2: MongoDB Atlas (Cloud MongoDB - Easier migration)
# - Create free cluster at https://mongodb.com/atlas
# - Get connection string from Database > Connect > Drivers > Python
# - Replace <password> with your database user password
# MONGO_URL=mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/hwh_player_advantage?retryWrites=true&w=majority

# ============================================
# DEMO MODE - NO DATABASE REQUIRED (Testing Only)
# ============================================
# Set to 'true' to run without external database (uses in-memory storage)
# PERFECT FOR: Quick Cloudflare Pages testing without setting up database
# WARNING: Data is lost on redeploy. Not for production.
DEMO_MODE=false

# ============================================
# PRODUCTION DATABASE - CHOOSE ONE
# ============================================
# IMPORTANT: Cloudflare Pages Functions CANNOT connect to localhost
# You MUST use a cloud-hosted database (Supabase OR MongoDB Atlas)
#
# --- Supabase PostgreSQL (Recommended for data consistency) ---
# Create free project: https://supabase.com
# Get connection string: Project Settings > Database > Connection String (URI)
# DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT_ID].supabase.co:5432/postgres
#
# --- MongoDB Atlas (Recommended for existing MongoDB code) ---
# Create free cluster: https://www.mongodb.com/atlas/database
# Get connection string: Database > Connect > Drivers > Python > Async (Motor)
# MONGO_URL=mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/hwh_player_advantage?retryWrites=true&w=majority&ssl=true
#
# CURRENT CONFIGURATION:
# Using placeholder values - MUST BE REPLACED for production
DATABASE_URL=postgresql://postgres:placeholder@db.placeholder.supabase.co:5432/postgres
MONGO_URL=mongodb://localhost:27017
DB_NAME=hwh_player_advantage

# ============================================
# STRIPE PAYMENT CONFIGURATION
# ============================================
# Get your API keys from: https://dashboard.stripe.com/apikeys
# Use sk_test_... for testing, sk_live_... for production
# IMPORTANT: Replace with your actual Stripe secret key
STRIPE_API_KEY=sk_live_your_stripe_live_key_here

# Stripe Webhook Secret (for webhook endpoint)
# Get this from: https://dashboard.stripe.com/webhooks
# IMPORTANT: Replace with your actual webhook secret
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# ============================================
# JWT AUTHENTICATION
# ============================================
# Generate a strong secret: openssl rand -hex 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256

# ============================================
# EMAIL CONFIGURATION (AWS SES)
# ============================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
SES_FROM_EMAIL=noreply@elitegbb.com
SES_FROM_NAME=EliteGBB

# Email Provider: mock (logs only) | ses (AWS SES production)
EMAIL_PROVIDER=ses

# ============================================
# FRONTEND URLS (for redirects and Stripe success/cancel)
# ============================================
# These URLs are used for:
# 1. Password reset links
# 2. Stripe checkout success/cancel redirects
# 3. Email confirmation links
FRONTEND_URL=https://app.elitegbb.com
SUCCESS_URL=https://app.elitegbb.com/success
CANCEL_URL=https://app.elitegbb.com/intake

# ============================================
# ============================================
# OPTIONAL: FEATURE FLAGS
# ============================================
USE_SUPABASE=true
ENABLE_PAYMENTS=true
ENABLE_EMAILS=true

# ============================================
# COACH ACCOUNT CONFIGURATION
# ============================================
# Set to 'false' to allow coaches to login immediately without admin verification
# Default: true (coaches must be verified by admin before login)
REQUIRE_COACH_VERIFICATION=true
